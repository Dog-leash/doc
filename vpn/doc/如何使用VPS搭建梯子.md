# 如何使用VPS搭建梯子

## 免责声明（写在开头）

本教程仅供学术研究和技术交流使用，旨在提高网络技术的理解和掌握，不得用于任何非法目的。作者不对任何人因使用本教程而产生的任何直接或间接的损失或责任负责。

请注意，根据中华人民共和国相关法律和法规，未经许可，不得建立、使用、提供或者进行传播用于非法获取、使用网络信息的技术手段，否则将可能构成违法行为。在使用本教程时，您有责任确保您的行为符合您所在地的法律法规。

如果您选择使用本教程，您将自行承担所有风险。作者对于由于使用或无法使用本教程所引起的任何形式的损失或损害，包括但不限于直接、间接、特殊、偶然、惩罚性或后果性的损失或损害，概不负责。

在使用本教程之前，请确保您已经充分理解了以上内容。如果您不能接受以上任何一点，请立即停止使用本教程。

## 整体流程

梯子的原理如下图所示，其实就是通过一个负责中转的服务器。

```bash
本地设备 (你的电脑或手机)
    |
    | (代理客户端将网络请求转发到代理服务器)
    V
代理服务器 (你在 VPS 上设置的 Shadowsocks 服务器)
    |
    | (代理服务器将网络请求发送到目标服务器，并将响应返回给代理客户端)
    V
目标服务器 (你想要访问的网站的服务器)
```

接下来，让我们从关键的代理服务器开始

## 代理服务器搭建

### 服务器购买

首先，我们需要一个国外的服务器去承载我们的Shadowsocks服务，来中转设备的请求。所以该服务器必须具有**中国国内可ping通**且**可以访问目标服务器**。

我推荐购买Racknerd家的服务器，很大一个原因就是便宜，被封后或者跑路后，成本可控（当然这里说的是最差情况-_-||）

我买的这款[768 MB KVM VPS](https://my.racknerd.com/aff.php?aff=8266&pid=695)一年才$10.28，带一个专用的IPv4地址，每个月1000GB公共网络端口，完整的root权限，以及10G SSD，其余配置可以自己点入商品详情查看。

如果1000GB一个月还无法满足，还有以下款可以选择（仅列举部分关键信息）：

- [1.5GB KVM VPS](https://my.racknerd.com/aff.php?aff=8266&pid=696)
  - 价格：$16.88/年
  - 流量：3000GB/月
  - 存储：30 GB PURE SSD RAID-10 Storage
- [2.5GB KVM VPS](https://my.racknerd.com/aff.php?aff=8266&pid=697)
  - 价格：$28.55/年
  - 流量：7000GB/月
  - 存储：60 GB PURE SSD RAID-10 Storage
- [3.5GB KVM VPS](https://my.racknerd.com/aff.php?aff=8266&pid=698)
  - 价格：$38.88/年
  - 流量：10,000GB/月
  - 存储：80 GB PURE SSD RAID-10 Storage

### 检查连接性&可访问性

完成购买流程后，你就可以在你的邮箱中收到Racknerd发送给你邮件，里面带有你的服务器ip和密码！

#### 检查国内是否可以ping通

拿到ip后，我们先用使用[站长之家的ping工具](https://ping.chinaz.com/)来进行检测，看看国内是否可以ping通该ip。

如果无法ping通！Racknerd允许在购买后72小时内提出要求，此时是免费的。如果过了这个时间的话，则需要花费$3来进行更换。

更换ip详见官方提供的[指引操作流程](https://blog.racknerd.com/changing-your-vps-primary-ipv4-address-with-racknerd/)。

![72h免费更换ip](./images/change_ip.jpg)

#### 检查网站的可访问性

这里给一个mac登录的例子，windows登录vps的方式可以自行google或百度

```bash
# 将your_server_ip换成邮件内的ip，点击回车后，再输入你的密码即可
ssh root@your_server_ip
```